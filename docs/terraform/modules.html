<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Terraform Modules | Terraform Docs</title>
  
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700&display=swap" rel="stylesheet">
  <link href="../../assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="../../assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  
  <style>
    :root {
      --primary-color: #149ddd;
      --secondary-color: #173b6c;
      --text-color: #272829;
      --bg-light: #f5f8fd;
      --code-bg: #282c34;
      --code-text: #abb2bf;
    }
    
    body {
      font-family: 'Open Sans', sans-serif;
      background: var(--bg-light);
      color: var(--text-color);
      line-height: 1.8;
    }
    
    .sidebar {
      position: sticky;
      top: 20px;
      background: white;
      border-radius: 12px;
      padding: 2rem;
      box-shadow: 0 3px 15px rgba(0,0,0,0.08);
      height: fit-content;
      max-height: 90vh;
      overflow-y: auto;
    }
    
    .sidebar h5 {
      color: var(--primary-color);
      font-weight: 600;
      margin-bottom: 1.5rem;
    }
    
    .sidebar .nav-link {
      color: var(--text-color);
      padding: 0.5rem 0;
      border-left: 3px solid transparent;
      transition: all 0.3s;
    }
    
    .sidebar .nav-link:hover,
    .sidebar .nav-link.active {
      color: var(--primary-color);
      border-left-color: var(--primary-color);
      padding-left: 1rem;
    }
    
    .content {
      background: white;
      border-radius: 12px;
      padding: 3rem;
      box-shadow: 0 3px 15px rgba(0,0,0,0.08);
      margin-bottom: 2rem;
    }
    
    h1 {
      color: var(--secondary-color);
      font-weight: 700;
      margin-bottom: 1.5rem;
    }
    
    h2 {
      color: var(--primary-color);
      font-weight: 600;
      margin-top: 2.5rem;
      margin-bottom: 1.5rem;
      padding-bottom: 0.5rem;
      border-bottom: 2px solid var(--bg-light);
    }
    
    h3 {
      color: var(--secondary-color);
      font-weight: 600;
      margin-top: 2rem;
      margin-bottom: 1rem;
    }
    
    code {
      background: #f8f9fa;
      padding: 0.2rem 0.5rem;
      border-radius: 4px;
      font-family: 'Courier New', monospace;
      color: #e83e8c;
    }
    
    pre {
      background: var(--code-bg);
      border: 1px solid #e9ecef;
      border-radius: 8px;
      padding: 1.5rem;
      overflow-x: auto;
      margin: 1.5rem 0;
    }
    
    pre code {
      background: none;
      padding: 0;
      color: var(--code-text);
      font-family: 'Courier New', monospace;
    }
    
    .navbar {
      background: white;
      box-shadow: 0 2px 15px rgba(0,0,0,0.1);
      margin-bottom: 2rem;
    }
    
    .breadcrumb {
      background: transparent;
      padding: 0;
      margin-bottom: 2rem;
    }
    
    .breadcrumb a {
      color: var(--primary-color);
      text-decoration: none;
    }
    
    .tip-box {
      background: #e7f3ff;
      border-left: 4px solid #007bff;
      padding: 1rem 1.5rem;
      margin: 1.5rem 0;
      border-radius: 6px;
    }
    
    .info-card {
      background: var(--bg-light);
      border-radius: 8px;
      padding: 1.5rem;
      margin: 1.5rem 0;
      border-left: 4px solid var(--primary-color);
    }
    
    .info-card h4 {
      color: var(--primary-color);
      margin-bottom: 0.5rem;
    }
  </style>
</head>
<body>

  <nav class="navbar navbar-expand-lg navbar-light">
    <div class="container-fluid">
      <div class="container">
        <a class="navbar-brand" href="../../index.html">
          <i class="bi bi-house-door me-2"></i>LÃª BÃ¬nh PhÆ°Æ¡ng
        </a>
      </div>
    </div>
  </nav>

  <div class="container">
    <nav aria-label="breadcrumb">
      <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="../../index.html">Home</a></li>
        <li class="breadcrumb-item"><a href="../index.html">Documents</a></li>
        <li class="breadcrumb-item"><a href="index.html">Terraform</a></li>
        <li class="breadcrumb-item active">Modules</li>
      </ol>
    </nav>

    <div class="row">
      <div class="col-lg-3">
        <div class="sidebar">
          <h5><i class="bi bi-diagram-3 me-2"></i>Terraform</h5>
          <nav class="nav flex-column">
            <a class="nav-link" href="index.html">Getting Started</a>
            <a class="nav-link" href="concepts.html">Core Concepts</a>
            <a class="nav-link" href="providers.html">Providers & Resources</a>
            <a class="nav-link" href="state.html">State Management</a>
            <a class="nav-link active" href="modules.html">Modules</a>
            <a class="nav-link" href="aws.html">AWS Setup</a>
            <a class="nav-link" href="gcp.html">GCP Setup</a>
            <a class="nav-link" href="best-practices.html">Best Practices</a>
          </nav>
        </div>
      </div>

      <div class="col-lg-9">
        <div class="content">
          <h1><i class="bi bi-box me-2"></i>Terraform Modules</h1>
          
          <p>
            Modules are containers for multiple resources that are used together. They allow you to organize your code, 
            reuse infrastructure, and create abstractions.
          </p>

          <h2>What are Modules?</h2>
          
          <div class="info-card">
            <h4>Benefits of Modules</h4>
            <ul>
              <li>âœ… <strong>Reusability</strong> - Write once, use many times</li>
              <li>âœ… <strong>Organization</strong> - Group related resources together</li>
              <li>âœ… <strong>Abstraction</strong> - Hide complexity behind simple interfaces</li>
              <li>âœ… <strong>Maintainability</strong> - Update in one place, affects all uses</li>
              <li>âœ… <strong>Testing</strong> - Test modules independently</li>
            </ul>
          </div>

          <h2>Module Structure</h2>

          <h3>Standard Module Structure</h3>
          <pre><code>modules/
â””â”€â”€ vpc/
    â”œâ”€â”€ main.tf          # Main resources
    â”œâ”€â”€ variables.tf     # Input variables
    â”œâ”€â”€ outputs.tf       # Output values
    â”œâ”€â”€ README.md        # Documentation
    â””â”€â”€ versions.tf      # Provider requirements</code></pre>

          <h2>Creating a Module</h2>

          <h3>Example: VPC Module</h3>
          
          <h4>modules/vpc/variables.tf</h4>
          <pre><code>variable "vpc_cidr" {
  description = "CIDR block for VPC"
  type        = string
}

variable "environment" {
  description = "Environment name"
  type        = string
}

variable "tags" {
  description = "Tags to apply to resources"
  type        = map(string)
  default     = {}
}</code></pre>

          <h4>modules/vpc/main.tf</h4>
          <pre><code>resource "aws_vpc" "main" {
  cidr_block           = var.vpc_cidr
  enable_dns_hostnames = true
  enable_dns_support   = true

  tags = merge(var.tags, {
    Name        = "${var.environment}-vpc"
    Environment = var.environment
  })
}

resource "aws_subnet" "public" {
  count             = 2
  vpc_id            = aws_vpc.main.id
  cidr_block        = cidrsubnet(var.vpc_cidr, 8, count.index)
  availability_zone = data.aws_availability_zones.available.names[count.index]

  tags = merge(var.tags, {
    Name = "${var.environment}-public-subnet-${count.index + 1}"
  })
}

data "aws_availability_zones" "available" {
  state = "available"
}</code></pre>

          <h4>modules/vpc/outputs.tf</h4>
          <pre><code>output "vpc_id" {
  description = "ID of the VPC"
  value       = aws_vpc.main.id
}

output "public_subnet_ids" {
  description = "List of public subnet IDs"
  value       = aws_subnet.public[*].id
}

output "vpc_cidr" {
  description = "CIDR block of the VPC"
  value       = aws_vpc.main.cidr_block
}</code></pre>

          <h2>Using Modules</h2>

          <h3>Local Modules</h3>
          <pre><code>module "vpc" {
  source = "./modules/vpc"
  
  vpc_cidr     = "10.0.0.0/16"
  environment  = "production"
  
  tags = {
    Project = "web-app"
    ManagedBy = "Terraform"
  }
}

# Access module outputs
resource "aws_instance" "web" {
  subnet_id = module.vpc.public_subnet_ids[0]
  # ...
}</code></pre>

          <h3>Git Repository Modules</h3>
          <pre><code>module "vpc" {
  source = "git::https://github.com/example/terraform-aws-vpc.git"
  
  vpc_cidr = "10.0.0.0/16"
}

# Use specific branch/tag
module "vpc" {
  source = "git::https://github.com/example/terraform-aws-vpc.git?ref=v1.2.0"
}

# Use specific branch
module "vpc" {
  source = "git::https://github.com/example/terraform-aws-vpc.git?ref=main"
}</code></pre>

          <h3>Terraform Registry Modules</h3>
          <pre><code># Public registry
module "vpc" {
  source  = "terraform-aws-modules/vpc/aws"
  version = "5.0.0"
  
  name = "my-vpc"
  cidr = "10.0.0.0/16"
  
  azs             = ["us-east-1a", "us-east-1b"]
  private_subnets = ["10.0.1.0/24", "10.0.2.0/24"]
  public_subnets  = ["10.0.101.0/24", "10.0.102.0/24"]
  
  enable_nat_gateway = true
  enable_vpn_gateway = true
  
  tags = {
    Terraform   = "true"
    Environment = "production"
  }
}</code></pre>

          <h2>Module Versioning</h2>
          
          <div class="tip-box">
            <strong>ðŸ’¡ Best Practice:</strong> Always pin module versions in production to ensure consistency.
          </div>

          <pre><code># Pin to specific version
module "vpc" {
  source  = "terraform-aws-modules/vpc/aws"
  version = "5.0.0"
}

# Use version constraints
module "vpc" {
  source  = "terraform-aws-modules/vpc/aws"
  version = "~> 5.0"  # >= 5.0, < 6.0
}</code></pre>

          <h2>Module Composition</h2>

          <h3>Nested Modules</h3>
          <pre><code>module "vpc" {
  source = "./modules/vpc"
  # ...
}

module "ec2" {
  source = "./modules/ec2"
  
  vpc_id         = module.vpc.vpc_id
  subnet_ids     = module.vpc.public_subnet_ids
  security_groups = module.vpc.security_group_ids
}</code></pre>

          <h2>Module Outputs</h2>

          <h3>Accessing Module Outputs</h3>
          <pre><code># Module definition
output "instance_id" {
  value = aws_instance.web.id
}

# Using module output
resource "aws_eip" "web_ip" {
  instance = module.ec2.instance_id
}

# Pass output to another module
module "monitoring" {
  source = "./modules/monitoring"
  instance_id = module.ec2.instance_id
}</code></pre>

          <h2>Module Best Practices</h2>

          <div class="tip-box">
            <strong>âœ… Best Practices:</strong>
            <ul>
              <li>âœ… One module per logical component (VPC, EC2, RDS)</li>
              <li>âœ… Use variables for all configurable values</li>
              <li>âœ… Expose outputs for important resource attributes</li>
              <li>âœ… Document modules with README.md</li>
              <li>âœ… Use version constraints for module sources</li>
              <li>âœ… Keep modules focused and single-purpose</li>
              <li>âœ… Use local values for computed values</li>
              <li>âœ… Follow consistent naming conventions</li>
            </ul>
          </div>

          <h2>Module Examples</h2>

          <h3>Complete Module Example</h3>
          
          <pre><code># modules/ec2/main.tf
variable "instance_type" {
  description = "EC2 instance type"
  type        = string
  default     = "t2.micro"
}

variable "subnet_id" {
  description = "Subnet ID for EC2 instance"
  type        = string
}

variable "tags" {
  description = "Tags for EC2 instance"
  type        = map(string)
  default     = {}
}

resource "aws_instance" "web" {
  ami           = data.aws_ami.amazon_linux.id
  instance_type = var.instance_type
  subnet_id     = var.subnet_id

  tags = var.tags
}

data "aws_ami" "amazon_linux" {
  most_recent = true
  owners      = ["amazon"]

  filter {
    name   = "name"
    values = ["amzn2-ami-hvm-*-x86_64-gp2"]
  }
}

output "instance_id" {
  description = "ID of the EC2 instance"
  value       = aws_instance.web.id
}

output "public_ip" {
  description = "Public IP of the EC2 instance"
  value       = aws_instance.web.public_ip
}</code></pre>

          <h2>Next Steps</h2>
          <ul>
            <li><strong><a href="best-practices.html">Best Practices</a></strong> - Production-ready practices</li>
            <li><strong><a href="aws.html">AWS Setup</a></strong> - Complete AWS setup guide</li>
            <li><strong><a href="concepts.html">Core Concepts</a></strong> - Deep dive into fundamentals</li>
          </ul>

        </div>
      </div>
    </div>
  </div>

  <script src="../../assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
</body>
</html>

